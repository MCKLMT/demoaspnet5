stages:
  - stage: 'BuildDev'
    variables:
    - group: 'webapp-dev-env-variable-group'
    jobs:
    - template: azure-pipelines-deployment-template.yml
      parameters:
        environment: 'Dev'
        webAppName: '$(WebAppName)'
        frameworkVersion: '5.0'
        toolVersion: '1.0'
  - stage: 'BuildTest'
    variables:
    - group: 'webapp-test-env-variable-group'
    jobs:
    - template: azure-pipelines-deployment-template.yml
      parameters:
        environment: 'Test'
        webAppName: '$(WebAppName)'
        frameworkVersion: '5.0'
        toolVersion: '1.0'
  - stage: 'BuildProd'
    variables:
    - group: 'webapp-prod-env-variable-group'
    jobs:
    - template: azure-pipelines-deployment-template.yml
      parameters:
        environment: 'Prod'
        webAppName: '$(WebAppName)'
        frameworkVersion: '5.0'
        toolVersion: '1.0'